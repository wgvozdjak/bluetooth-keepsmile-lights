<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lights Controller</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>LIGHTS CONTROLLER</h1>
      </header>

      <div class="control-panel">
        <div class="button-group">
          <button id="lightsON" class="btn primary">Turn On</button>
          <button id="lightsOFF" class="btn">Turn Off</button>
          <button id="lightsRed" class="btn">Red Light</button>
          <button id="lightsGradient" class="btn">Gradient</button>
          <div class="rgb-input-container">
            <div class="rgb-inputs">
              <input
                type="number"
                id="redInput"
                placeholder="R"
                min="0"
                max="255"
                class="rgb-input"
              />
              <input
                type="number"
                id="greenInput"
                placeholder="G"
                min="0"
                max="255"
                class="rgb-input"
              />
              <input
                type="number"
                id="blueInput"
                placeholder="B"
                min="0"
                max="255"
                class="rgb-input"
              />
            </div>
            <button id="setRgbColor" class="btn">Set RGB</button>
          </div>
          <button id="lightsMicMode" class="btn special">
            Microphone Mode
          </button>
          <button id="lightsComputerMode" class="btn special">
            Computer Audio Mode
          </button>
        </div>

        <div class="visualization">
          <div class="color-preview">
            <div id="colorBox" class="color-box"></div>
            <div class="rgb-preview">
              <div id="redBox" class="color-box-small"></div>
              <div id="greenBox" class="color-box-small"></div>
              <div id="blueBox" class="color-box-small"></div>
            </div>
          </div>
          <div class="chart-container">
            <canvas id="combinedChart"></canvas>
          </div>
        </div>

        <div class="settings-panel">
          <div class="settings-group">
            <h3>General Settings</h3>
            <div class="setting-item">
              <label>Testing Mode</label>
              <div class="testing-mode-container">
                <button
                  id="testingModeToggle"
                  class="btn-toggle"
                  onclick="toggleTestingMode()"
                >
                  Toggle
                </button>
                <span id="testingModeStatus" class="status-text">OFF</span>
              </div>
            </div>
            <div class="setting-item">
              <label>Sensitivity: <span id="sensitivityValue">1</span></label>
              <input
                type="range"
                min="0.1"
                max="2"
                step="0.1"
                value="1"
                onchange="updateSensitivity(this.value)"
              />
            </div>
            <div class="setting-item">
              <label>Color Power: <span id="colorPowerValue">1.8</span></label>
              <input
                type="range"
                min="0.1"
                max="5"
                step="0.1"
                value="1.8"
                onchange="updateColorPower(this.value)"
              />
            </div>
          </div>

          <div class="settings-group">
            <h3>Color Sensitivity</h3>
            <div class="setting-item">
              <label>Red: <span id="rSensitivityValue">1.05</span></label>
              <input
                type="range"
                min="0.1"
                max="2"
                step="0.05"
                value="1.05"
                onchange="updateRSensitivity(this.value)"
              />
            </div>
            <div class="setting-item">
              <label>Green: <span id="gSensitivityValue">1.15</span></label>
              <input
                type="range"
                min="0.1"
                max="2"
                step="0.05"
                value="1.15"
                onchange="updateGSensitivity(this.value)"
              />
            </div>
            <div class="setting-item">
              <label>Blue: <span id="bSensitivityValue">1.15</span></label>
              <input
                type="range"
                min="0.1"
                max="2"
                step="0.05"
                value="1.15"
                onchange="updateBSensitivity(this.value)"
              />
            </div>
          </div>

          <div class="settings-group">
            <h3>Frequency Settings</h3>
            <div class="setting-item">
              <label
                >Bass Center: <span id="bassCenterValue">100</span>Hz</label
              >
              <input
                type="range"
                min="20"
                max="500"
                value="100"
                onchange="updateBassCenter(this.value)"
              />
            </div>
            <div class="setting-item">
              <label>Mid Center: <span id="midCenterValue">1000</span>Hz</label>
              <input
                type="range"
                min="500"
                max="2000"
                value="1000"
                onchange="updateMidCenter(this.value)"
              />
            </div>
            <div class="setting-item">
              <label
                >High Center: <span id="highCenterValue">4000</span>Hz</label
              >
              <input
                type="range"
                min="2000"
                max="8000"
                value="4000"
                onchange="updateHighCenter(this.value)"
              />
            </div>
          </div>

          <div class="settings-group">
            <h3>Frequency Ranges</h3>
            <div class="setting-item">
              <label>Bass Width: <span id="bassWidthValue">300</span>Hz</label>
              <input
                type="range"
                min="100"
                max="1000"
                step="50"
                value="300"
                onchange="updateBassWidth(this.value)"
              />
            </div>
            <div class="setting-item">
              <label>Mid Width: <span id="midWidthValue">2000</span>Hz</label>
              <input
                type="range"
                min="500"
                max="4000"
                step="100"
                value="2000"
                onchange="updateMidWidth(this.value)"
              />
            </div>
            <div class="setting-item">
              <label>High Width: <span id="highWidthValue">5000</span>Hz</label>
              <input
                type="range"
                min="1000"
                max="10000"
                step="500"
                value="5000"
                onchange="updateHighWidth(this.value)"
              />
            </div>
          </div>
        </div>
      </div>

      <div class="log-panel">
        <h3>Log</h3>
        <pre id="log"></pre>
      </div>
    </div>
    <script src="/client.js"></script>
  </body>
</html>
